# Dining Memory App

AI-powered dining memory app that analyzes food & drink photos with semantic search

## 概要

食事やお酒の写真を撮影し、AIで自動解析してテキスト化。撮った写真を有効活用し、セマンティック検索で過去の食事体験を簡単に振り返ることができるネイティブアプリです。

### 解決する課題
- 食事写真を撮るが、後で見返すことが少ない
- クラウドストレージの容量を無駄に消費している  
- 過去の美味しかった料理やお店を思い出せない
- 自分の食事パターンや行動習慣に気づけない

### ターゲットユーザー
**40代後半男性、技術リテラシー高、シンプルUI重視**
- ビジネスパーソン、グルメ好き、ダイエット意識あり
- 実用性・効率性を重視
- データの安全性・プライバシーを重視

## 主な機能

### 📸 コア機能（MVP）
- **写真撮影・解析**: カメラ撮影 + AI自動解析（TensorFlow Lite）
- **記録管理**: 料理名、場所、メモの保存・編集
- **一覧表示**: 日付別グループ表示、サムネイル付きカード
- **検索機能**: 全文検索（FTS5）、期間・場所フィルター

### 🧠 インサイト・発見機能
- **自炊分析**: 時短料理 / 日常料理 / 本格料理の分類
- **行動パターン発見**: 隠れたルーティン、曜日別傾向
- **「そういえば」機能**: 忘れかけてるメニューの発見
- **変化の可視化**: 期間比較での食事傾向変化

### 🔍 高度な検索
- **複合条件検索**: テキスト + 期間 + 場所 + タグ
- **関連記録表示**: 同じ店、同じ料理の履歴
- **検索候補**: 入力補助、検索履歴活用

### 📊 統計・振り返り
- **月次サマリー**: 記録数、自宅 vs 外食比率
- **場所別分析**: よく行く店ランキング、リピート間隔
- **料理レパートリー**: よく作る料理、忘れかけメニュー
- **季節・環境分析**: 天気・曜日との相関発見

### ⚙️ データ管理
- **自動バックアップ**: iCloud/Google Drive連携
- **データエクスポート**: JSON/CSV形式
- **プライバシー重視**: 全データ端末内保存

## 技術スタック

### 🚀 端末リソース最大活用設計
- **アプリ**: React Native + Expo（iOS/Android対応）
- **データベース**: SQLite + Watermelon DB（完全ローカル）
- **AI解析**: TensorFlow Lite（端末内）+ Gemini API（補完）
- **画像処理**: React Native Image Resizer（端末内圧縮）
- **ストレージ**: 端末内蔵ストレージ + OS標準バックアップ

### 💰 完全無料運用
- **AI解析**: ローカル無制限 + クラウド月3-5回（無料枠内）
- **データベース**: SQLite（端末内）
- **バックアップ**: iCloud/Google Drive（ユーザー既存容量）
- **配布**: App Store/Google Play（個人開発者無料枠）

## プロジェクト構成

```
dining-memory-app/
├── docs/                    # 設計ドキュメント
│   ├── tech-spec.md         # 技術仕様書
│   ├── database-design.md   # データベース設計
│   ├── screen-designs.md    # 画面設計仕様
│   └── user-flows.md        # ユーザーフロー設計
├── src/
│   ├── screens/             # 画面コンポーネント
│   │   ├── CameraScreen/    # 撮影・AI解析
│   │   ├── RecordsScreen/   # 記録一覧
│   │   ├── SearchScreen/    # 検索・フィルター
│   │   ├── StatsScreen/     # 統計・インサイト
│   │   └── SettingsScreen/  # 設定・データ管理
│   ├── components/          # 共通UIコンポーネント
│   ├── services/            # データアクセス層
│   ├── database/            # DB設定・モデル
│   ├── utils/               # ユーティリティ
│   └── types/               # TypeScript型定義
├── assets/                  # 画像・アイコン等
└── README.md
```

## 開発状況

### ✅ 設計フェーズ完了
- [x] プロジェクト企画・技術選定
- [x] データベース設計（満足度削除、自炊分析追加）
- [x] 画面設計・ワイヤーフレーム（全5画面）
- [x] ユーザーフロー設計（エラーハンドリング含む）
- [x] 40代男性向けUX方針策定

### 🚧 実装フェーズ（各フェーズ進行中）
- [x] **開発環境セットアップ** ⭐完了（2025/10/13）
  - 依存パッケージ全インストール 🎯
  - Expo SDK 54 環境構築完了
  - TypeScript 設定済み
- [x] **データベーススキーマ実装** ⭐完了（2025/10/13）
  - WatermelonDB スキーマ定義（10テーブル）
  - モデルクラス実装（Meal, Ingredients 等）
  - 検索最適化インデックス設定
- [x] **基本ナビゲーション・画面構成** ⭐完了（2025/10/13）
  - React Navigation タブナビゲーション実装
  - 5画面のプレースホルダー設定
  - 40代男性向けUXデザイン適用
- [x] **データベースAPI実装** ⭐完了（2025/10/13）
  - MealService CRUD操作全対応 ✅
  - 検索・フィルタリング機能実装
  - 統計データ生成機能完成
  - DatabaseProvider Reactコンテキスト統合
- [ ] CameraScreen（撮影・AI解析）
- [ ] RecordsScreen（一覧・詳細表示）
- [ ] SearchScreen（検索・フィルター）
- [ ] StatsScreen（統計・インサイト）
- [ ] SettingsScreen（設定・バックアップ）

### 🔮 将来機能
- [ ] セマンティック検索（ベクトル検索）
- [ ] 栄養情報推定・表示
- [ ] レシピ管理機能
- [ ] 家族・友人との共有機能

## 開発環境のセットアップ

### 必要環境
```bash
# Node.js 18.x以上
node --version

# 開発ツール
npm install -g @expo/cli
npm install -g eas-cli
```

### プロジェクト初期化
```bash
# リポジトリをクローン
git clone https://github.com/[username]/dining-memory-app.git
cd dining-memory-app

# 依存関係をインストール
npm install

# 環境変数を設定
cp .env.example .env.local
# .env.local に必要な環境変数を設定

# 開発サーバー起動
npx expo start
```

### 必要な環境変数
```env
# AI解析用（補完機能）
GEMINI_API_KEY=your_gemini_api_key

# アプリ設定
EXPO_PUBLIC_APP_NAME=Dining Memory
EXPO_PUBLIC_APP_VERSION=1.0.0
```

## データベース設計

### 主要テーブル
```sql
-- 食事記録メイン
meals (id, meal_name, cuisine_type, notes, cooking_level, is_homemade, ...)

-- 材料・要素
ingredients (id, meal_id, name, category, ingredient_type, ...)

-- 自炊パターン分析
cooking_patterns (id, meal_id, recipe_complexity, cooking_time, ...)

-- 行動インサイト
behavior_insights (id, insight_type, title, description, confidence, ...)
```

### 検索最適化
- **FTS5全文検索**: 料理名、メモ、場所の横断検索
- **複合インデックス**: 日時×場所、自炊×日時等
- **セマンティック検索準備**: ベクトル埋め込み対応

## 主要画面設計

### 1. CameraScreen（撮影画面）
- フルスクリーンカメラプレビュー
- ワンタップ撮影 → AI解析 → 結果表示
- 段階的フォールバック（ローカルAI → クラウドAI → 手動）

### 2. RecordsScreen（記録一覧）
- 日付別グループ表示
- サムネイル付き食事カード
- スワイプ操作（編集・削除・共有）

### 3. SearchScreen（検索）
- リアルタイム全文検索
- 期間・場所・タグフィルター
- 検索結果ハイライト表示

### 4. StatsScreen（統計・インサイト）
- 自炊レベル分析（時短・日常・本格）
- 行動パターン発見
- 「そういえば」機能（忘れかけメニュー）

### 5. SettingsScreen（設定）
- データバックアップ・復元
- カメラ・プライバシー設定
- データエクスポート機能

## 40代男性向けUX設計

### 視認性・操作性
- **大きなタップエリア**: 最小44pt、メインボタン80pt
- **高コントラスト**: 明確な色分け、読みやすいフォント
- **アイコン+テキスト**: 直感的理解のサポート

### 実用性・効率性
- **ワンタップ操作**: 撮影から保存まで最小ステップ
- **自動化**: GPS、時刻記録、AI解析の自動処理
- **学習機能**: よく行く店、検索履歴の活用

### 信頼性・安心感
- **データ透明性**: 保存場所・処理内容の明示
- **段階的フォールバック**: 失敗時の代替手段
- **プライバシー重視**: 端末内処理、外部送信最小限

### 控えめなサポート
- **余計なお世話をしない**: 過度な提案や指導を避ける
- **自然な気づき**: 「そういえば」レベルの発見提供
- **押し付けがましくない**: 継続支援も控えめに

## 開発・AI活用戦略

### 段階的開発アプローチ
```
Phase 1 (2-3週間): 基本機能（撮影・記録・一覧）
Phase 2 (2-3週間): 検索・フィルター機能
Phase 3 (2-3週間): 統計・インサイト機能
Phase 4 (1-2週間): 設定・最適化・リリース準備
```

### AI開発支援活用
- **設計**: Claude.ai での相談・問題解決
- **実装**: Cursor IDE でのリアルタイム支援
- **デバッグ**: GitHub Copilot での効率化
- **レビュー**: AI支援でのコード品質向上

## パフォーマンス・最適化

### 端末リソース活用
- **GPU活用**: TensorFlow Lite での AI推論加速
- **メモリ効率**: 仮想スクロール、画像遅延読み込み
- **ストレージ最適化**: WebP圧縮、サムネイル生成

### 検索最適化
- **FTS5**: SQLite全文検索エンジン
- **インデックス戦略**: 複合条件検索の高速化
- **キャッシュ活用**: よく使う検索結果の保持

## セキュリティ・プライバシー

### データ保護
- **完全ローカル保存**: 全データを端末内管理
- **暗号化**: 機密データの暗号化保存
- **最小限外部通信**: AI解析のみ月数回使用

### ユーザー制御
- **データ主権**: いつでも削除・エクスポート可能
- **透明性**: データ使用目的の明確化
- **選択権**: 機能のオン・オフ選択

## ライセンス

MIT License

## 開発者向け情報

### コントリビューション
現在個人開発プロジェクトですが、フィードバックは大歓迎です。

### 開発フロー
1. feature ブランチを作成
2. 変更を実装・テスト
3. プルリクエストを作成

### テスト戦略
- **ユニットテスト**: データベース操作、AI解析処理
- **統合テスト**: 撮影→解析→保存の一連フロー
- **E2Eテスト**: 主要ユーザーフローの自動化
- **実機テスト**: iOS/Android での動作確認

---

**Target User**: 40代後半男性、技術リテラシー高、シンプルUI重視  
**Development Start**: 2025年9月  
**Tech Stack**: React Native + Expo, SQLite, TensorFlow Lite  
**Philosophy**: 端末リソース最大活用 + プライバシー重視 + 実用性第一
