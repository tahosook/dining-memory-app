# Dining Memory App

## 📝 プロジェクト概要

食事やお酒の写真を撮影し、AIで自動解析してテキスト化するネイティブアプリです。
撮った写真を有効活用し、セマンティック検索で過去の食事体験を簡単に振り返ることができます。
40代後半男性をターゲットに、シンプルで実用的なUI設計を採用しています。

### 🎯 解決する課題
- **写真の活用不足**: 撮った料理写真を見返す機会が少ない
- **記憶の散逸**: 美味しかった料理やお店を思い出せない
- **行動パターンの気づき**: 自身の食事傾向やルーティンを把握できない
- **プライバシーの懸念**: クラウドストレージの容量圧迫とデータ管理の不安

## ✨ 主な機能

### 📸 コア機能（MVP時点）
- **スマート撮影機能**: カメラ撮影 + AI自動解析（TensorFlow Lite）
- **記録管理**: 料理名、場所、メモの保存・編集削除
- **タイムライン表示**: 日付別グループ表示、サムネイル付カード
- **基本検索**: 全文検索・期間・場所・タグフィルター

### 🧠 インサイト・発見機能（将来予定）
- **自炊分析**: 時短料理/日常料理/本格料理の分類と傾向
- **行動パターン**: 隠れたルーティン・曜日別傾向の発見
- **「そういえば」機能**: 忘れかけているメニューの再発見
- **変化の可視化**: 期間比較での食事傾向の変化分析

### 🔍 高度な検索機能（将来予定）
- **複合条件検索**: テキスト + 期間 + 場所 + 評価の組み合わせ
- **セマンティック検索**: 意味ベースの検索（ベクトル検索）
- **検索候補**: 入力補助・検索履歴の活用

### 📊 統計・振り返り機能（将来予定）
- **月次サマリー**: 記録数、自宅vs外食比率
- **場所別分析**: お気に入りの店ランキング・リピート間隔
- **レパートリー分析**: 作る料理の傾向・忘れかけメニュー
- **相関分析**: 天気・曜日との食事パターンの関連性

### ⚙️ データ管理機能（将来予定）
- **クラウドバックアップ**: iCloud/Google Drive連携
- **データエクスポート**: JSON/CSV形式での出力
- **プライバシー重視**: 全データ端末内優先保存

## 🛠️ 技術スタック

### 🚀 端末リソース最大活用設計
- **フレームワーク**: React Native + Expo（iOS/Android対応）
- **プログラミング言語**: TypeScript（厳密な型安全）
- **データベース**: SQLite + WatermelonDB（完全オフライン）
- **AI解析**: TensorFlow Lite（端末内無料）+ Gemini API（補完用）
- **画像処理**: React Native Image Resizer（端末内処理）
- **ストレージ**: 端末内蔵ストレージ + OS標準バックアップ

### 💰 完全無料運用設計
- **AI解析コスト**: ローカル解析無制限 + クラウドAPI月3-5回程度
- **データベース**: SQLite（完全に無料）
- **バックアップ**: iCloud/Google Drive（既存ユーザー容量）
- **配布**: App Store/Google Play（個人開発者プログラム無料枠）

## 📁 プロジェクト構成

```
dining-memory-app/
├── docs/                        # 📋 設計ドキュメント群
│   ├── tech-spec.md             # 技術仕様書
│   ├── coding-standards.md      # コーディング規約集
│   ├── ai-guidelines.md         # AI開発支援ガイドライン
│   ├── database-design.md       # データベース設計
│   ├── screen-designs.md        # 画面設計仕様
│   ├── user-flows.md            # ユーザーフロー設計
│   └── notes/                   # 技術ノート・問題解決記録
├── src/                         # 🔧 ソースコード
│   ├── screens/                 # 📱 画面コンポーネント
│   │   ├── CameraScreen/        # 撮影・AI解析画面
│   │   ├── RecordsScreen/       # 記録一覧画面
│   │   ├── SearchScreen/        # 検索画面
│   │   ├── StatsScreen/         # 統計画面
│   │   └── SettingsScreen/      # 設定画面
│   ├── components/              # 🎨 共通UIコンポーネント
│   ├── constants/               # 🔧 アプリ定数定義
│   ├── database/                # 💾 DBスキーマ・モデル
│   ├── hooks/                   # 🎣 カスタムフック
│   ├── navigation/              # 🧭 ナビゲーション設定
│   ├── types/                   # 🎯 TypeScript型定義
│   ├── utils/                   # 🔨 ユーティリティ関数
│   └── contexts/                # 🌐 React Context
├── assets/                      # 🖼️ 画像・アイコン・アセット
├── tests/                       # 🧪 テストコード
└── README.md                    # 📖 このファイル
```

## 📊 開発状況

### ✅ 完了したフェーズ

#### 設計フェーズ（100%完了）
- [x] **プロジェクト企画・要件定義**（2025/9月）
  - 40代男性向けUX/UI設計の策定（シンプル・実用的）
  - MVPスコープの明確化（撮影・記録・閲覧を中心に）
- [x] **技術選定とアーキテクチャ設計**（2025/9月）
  - React Native + Expo採用（クロスプラットフォーム）
  - WatermelonDB + SQLite採用（オフライン中心）
  - 段階的AI解析（ローカル→クラウドフォールバック）

#### 基盤実装フェーズ（100%完了）
- [x] **開発環境構築**（2025/10/13）
  - Node.js 18.x + Expo SDK 54環境構築
  - TypeScript厳格設定 + ESLint + Prettier統合
- [x] **データベース基盤**（2025/10/13）
  - WatermelonDBスキーマ定義（10テーブル）
  - モデルクラス実装（Meal, Ingredient等）
  - FTS5全文検索最適化インデックス設定
- [x] **基本ナビゲーション**（2025/10/13）
  - React Navigationタブナビゲーション実装
  - 5画面プレースホルダー設定

#### コア機能実装フェーズ（80%完了）
- [x] **データアクセス層**（2025/10/13）
  - MealService CRUD操作実装
  - 検索・フィルタリング・統計API実装
  - DatabaseProvider React コンテキスト統合
- [x] **CameraScreen実装**（2025/10/15）
  - Expo Camera完全統合・権限管理機能
  - AI解析なしの写真撮影保存機能
  - プラットフォーム固有UI調整（iOS/Android）
  - Presentational/Containerパターンの適用
  - 自動テスト実装（9テストケース）
- [x] **RecordsScreen実装**（2025/10/13）
  - 日付別グループ表示・サムネイル対応
  - CRUD操作（作成・読み取り・更新・削除）
  - 40代男性向けUI（大きくて見やすい）
  - プルリフレッシュ・詳細ポップアップ

### 🚧 進行中のフェーズ

#### 高機能実装フェーズ（20%進行中）
- [ ] **SearchScreen**（検索・フィルター機能）
- [ ] **StatsScreen**（統計・インサイト機能）
- [ ] **SettingsScreen**（設定・データ管理機能）

#### AI統合フェーズ（0%開始）
- [ ] **TensorFlow Lite統合**（ローカルAI解析）
- [ ] **Gemini API統合**（解析補完機能）
- [ ] **セマンティック検索**（ベクトル検索実装）

### 🔮 リリース予定の追加機能
- [ ] 栄養情報推定機能
- [ ] レシピ管理・提案機能
- [ ] 家族・友人共有機能
- [ ] 高度な行動パターン分析

## 🚀 開発環境セットアップ

### 📋 システム要件
- **Node.js**: 18.x以上（推奨: v18.20.7）
- **Expo CLI**: v54.x以上
- **iOS開発**: Xcode（macOSのみ）
- **Android開発**: Android Studio（オプション）

### 🛠️ 初期セットアップ
```bash
# 1. リポジトリをクローン
git clone https://github.com/tahosook/dining-memory-app.git
cd dining-memory-app

# 2. Node.jsバージョン確認
node --version  # 18.x以上であることを確認

# 3. 依存関係をインストール
npm install

# 4. Expo CLIのインストール（未インストールの場合）
npm install -g @expo/cli

# 5. 環境変数ファイルの作成
cp .env.example .env.local

# 6. 開発サーバー起動
npx expo start
```

### 🔧 環境変数の設定
`.env.local`ファイルに以下の必須項目を設定：

```env
# AI解析用APIキー（将来的な機能拡張用）
GEMINI_API_KEY=your_gemini_api_key

# アプリ基本情報
EXPO_PUBLIC_APP_NAME=Dining Memory
EXPO_PUBLIC_APP_VERSION=1.0.0
```

### 🔍 動作確認
開発サーバー起動後：
1. 物理デバイスでExpo Goアプリを使用
2. カメラタブから写真撮影をテスト
3. 記録タブで保存されたデータを確認

## 📚 開発ドキュメント

### 🎯 設計原則
- **単一責任の原則**: 各コンポーネントは1つの役割のみ
- **オフライン優先**: ネット接続なしでも基本機能使える
- **プライバシー重視**: 全データ端末内管理
- **パフォーマンス重視**: React Native最適化を実施
- **保守性重視**: TypeScript厳密型付け + テスト充実

### 📋 主なドキュメント
- **[`docs/tech-spec.md`](docs/tech-spec.md)** - 技術仕様・実装計画
- **[`docs/coding-standards.md`](docs/coding-standards.md)** - React Nativeコーディング規約
- **[`docs/ai-guidelines.md`](docs/ai-guidelines.md)** - AI支援開発ガイドライン
- **[`docs/database-design.md`](docs/database-design.md)** - DBスキーマ設計
- **[`docs/screen-designs.md`](docs/screen-designs.md)** - 画面設計仕様
- **[`docs/user-flows.md`](docs/user-flows.md)** - ユーザーフロー・使用シナリオ

### 🧪 テスト戦略
- **ユニットテスト**: データベース操作・個別関数
- **統合テスト**: 撮影→保存→表示の一連フロー
- **自動テスト**: Jest + React Native Testing Library
- **実機テスト**: iOS/Android両プラットフォーム

## 👥 対象ユーザー

### 🎯 ペルソナ
**「40代後半男性・技術リテラシーが高いビジネスマン」**
- **属性**: ビジネスパーソン、グルメ好き、ダイエット意識あり
- **価値観**: 実用性・効率性を重視、データ安全性・プライバシーを重視
- **使用頻度**: 日常的に食事記録、デイリー/ウィークリーで振り返り
- **技術レベル**: 最新技術に強い、複雑な操作は避ける

### 🎨 UXデザイン指針
#### 視認性・操作性
- **大きなタップエリア**: 最小44pt、メインボタン80pt以上
- **高コントラスト**: 明確な色分け・読みやすいフォントサイズ
- **直感的なUI**: アイコン + テキストで理解しやすく

#### 実用性・効率性
- **ワンタップ操作**: 撮影から保存まで最小ステップ
- **自動化機能**: GPS・時刻・AI解析の自動処理
- **学習機能**: よく使う機能の優先表示

#### 信頼性・安心感
- **データ透明性**: 保存場所・処理内容の明示表示
- **段階的フォールバック**: 失敗時の代替手段の自動提示
- **プライバシー重視**: 端末内処理を優先

## 🎪 開発・AI活用戦略

### 📅 開発アプローチ
```
Phase 1 (2-3週間): 基本機能完成（撮影・記録・閲覧）
├─ CameraScreen + RecordsScreenの完成度向上
├─ テスト全カバレッジの達成
└─ パフォーマンス最適化

Phase 2 (2-3週間): 検索・統計機能実装
├─ SearchScreen + StatsScreenの実装
├─ データ分析・可視化機能
└─ UX/UIのブラッシュアップ

Phase 3 (2-3週間): AI統合・最終調整
├─ TensorFlow Lite統合
├─ Gemini API補完機能実装
└─ リリース準備（審査対応・ドキュメント整備）
```

### 🤖 AI開発支援
- **設計支援**: Claude.aiでの仕様検討・問題解決
- **実装支援**: Cursor IDEでのリアルタイムコード生成
- **デバッグ支援**: GitHub Copilotでの効率化
- **品質管理**: AI支援でのコードレビュー・改善提案

## 📈 パフォーマンス・セキュリティ

### ⚡ パフォーマンス最適化
- **GPU活用**: TensorFlow Liteでの高速AI推論
- **メモリ効率**: 仮想スクロール・画像遅延読み込み
- **ストレージ効率**: WebP圧縮・サムネイル自動生成

### 🔐 セキュリティ・プライバシー
- **ローカル完結**: AI解析も基本的に端末内処理
- **最小外部通信**: 月数回のクラウドAPI利用のみ
- **データ主権**: ユーザーが全データを制御可能

## 📝 ライセンス

MIT License - 個人・商用問わず自由に利用・改変・配布可能

## 👨‍💻 開発者向け情報

### 🌟 開発参加
現在は個人開発プロジェクトですが、フィードバック大歓迎！
- [Issues](../../issues) でバグ報告・機能要望
- [Discussions](../../discussions) で技術的議論

### 🔥 推奨開発フロー
1. **ブランチ作成**: `feature/`プレフィックスで新しいブランチ
2. **実装・テスト**: 変更を実装しテストコード追加
3. **コードレビュー**: 自己レビュー後プルリクエスト作成
4. **マージ**: mainブランチに安全に統合

### 🧪 品質基準
- **テストカバレッジ**: 全主要機能80%以上
- **TypeScript厳格**: `no-any`ポリシー遵守
- **パフォーマンス**: 起動時間3秒以内・メモリ使用量適正
- **アクセシビリティ**: iOS/Android全ユーザーに配慮

---

**🍽️ Dining Memory - あなたの食生活を、スマートに振り返る**

開発開始: 2025年9月 | 技術スタック: React Native + Expo + SQLite + AI
想い: 端末リソースの最大活用 + プライバシー保護 + 実用性優先
