# 食事写真記録アプリ - 技術仕様書

## プロジェクト概要
食べたご飯・飲んだお酒の写真をAIで解析し、テキスト化してセマンティック検索可能な記録アプリ

### ターゲット
- 40代後半男性
- 技術リテラシー高
- シンプルなUIを求める
- ダイエット意識あり

## 技術スタック選定

### フロントエンド
**選択: Next.js 14 (App Router) + TypeScript**
- 理由:
  - AI支援が豊富（Cursor, Copilotで高い生産性）
  - モバイル対応が容易（PWA化可能）
  - 画像最適化機能内蔵
  - デプロイが簡単（Vercel）

### バックエンド
**選択: Next.js API Routes**
- 理由:
  - フロントエンドと統合、開発・デプロイが簡単
  - サーバーレス環境で運用コスト低
  - TypeScriptで一貫した開発

### データベース
**選択: Supabase (PostgreSQL)**
- 理由:
  - 簡単セットアップ
  - リアルタイム機能
  - 画像ストレージ機能内蔵
  - ベクトル検索対応（将来のセマンティック検索用）
  - 認証機能付き

### AI画像解析
**選択: OpenAI Vision API (GPT-4V)**
- 理由:
  - 日本料理の認識精度が高い
  - 自然な日本語出力
  - コスト効率良好
  - APIが安定

### 認証
**選択: Supabase Auth**
- 理由:
  - データベースと統合
  - ソーシャルログイン対応
  - 設定が簡単

### デプロイ・ホスティング
**選択: Vercel**
- 理由:
  - Next.jsとの親和性
  - 自動デプロイ
  - 環境変数管理が容易

## アーキテクチャ概要
```
[ユーザー] 
↓ 写真アップロード
[Next.js Frontend]
↓ API呼び出し
[Next.js API Routes]
↓ 画像解析依頼
[OpenAI Vision API]                                                            ↓ 結果保存
[Supabase Database] 
↓ 検索・取得
[セマンティック検索機能]                                                                ```

                                                                ## 開発環境
- **IDE**: Cursor (AI支援重視)
- **バージョン管理**: GitHub
- **パッケージ管理**: pnpm
- **CSS**: Tailwind CSS
- **UI コンポーネント**: shadcn/ui

                                                                ## MVP機能仕様

                                                                ### 必須機能
1. **写真撮影・アップロード**
                                                                   - カメラ連携
                                                                      - ファイル選択
                                                                         - 画像プレビュー

                                                                         2. **AI解析・保存**
                                                                            - OpenAI Vision APIで解析
                                                                               - 料理名、材料、メモを抽出
                                                                                  - Supabaseに保存

                                                                                  3. **記録一覧表示**
                                                                                     - 日付別表示
                                                                                        - サムネイル表示
                                                                                           - 解析結果表示

                                                                                           4. **基本検索**
                                                                                              - テキスト検索
                                                                                                 - 日付フィルター

                                                                                                 ### 将来拡張機能
                                                                                                 - セマンティック検索（ベクトル検索）
                                                                                                 - 栄養素情報表示
                                                                                                 - 統計・レポート機能
                                                                                                 - 位置情報連携

                                                                                                 ## 次のステップ
                                                                                                 1. 環境セットアップ
                                                                                                 2. データベース設計
                                                                                                 3. 画面設計・ワイヤーフレーム
                                                                                                 4. API設計