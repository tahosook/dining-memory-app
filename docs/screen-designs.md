# 画面設計仕様書 - Dining Memory App

## ドキュメント概要
- **作成日**: 2025年9月11日
- **最終更新**: 2025年9月11日
- **対象**: MVP版の全画面設計
- **技術スタック**: React Native + Expo（ネイティブアプリ）
- **ターゲットユーザー**: 40代後半男性、技術リテラシー高、シンプルUI重視

## 全体ナビゲーション構造

### アプリ全体のナビゲーション
```
TabNavigation (ボトムタブ)
├── 📸 撮影 (CameraScreen)      ← メイン機能
├── 📋 記録 (RecordsScreen)     ← 一覧表示
├── 🔍 検索 (SearchScreen)      ← 検索機能
├── 📊 統計 (StatsScreen)       ← インサイト・発見
└── ⚙️ 設定 (SettingsScreen)    ← アプリ設定
```

### 画面遷移フロー
```
[CameraScreen] → [AI解析中] → [解析結果] → [編集] → [保存完了]
                      ↓
                 [エラー処理] → [手動入力] または [再撮影]
```

---

## 1. CameraScreen（撮影画面）設計

### 基本レイアウト構成
```
┌─────────────────────────┐
│ ⚙️        🍽️ Dining      📋 │ ← ヘッダー（80pt）
│ 設定        Memory      記録 │
├─────────────────────────┤
│                         │
│                         │
│      カメラプレビュー    │ ← メイン領域
│         領域             │   （フルスクリーン）
│                         │
│                         │
│                         │
├─────────────────────────┤
│     📷       🔘       ⚡      │ ← ボトムコントロール
│  ギャラリー   撮影    フラッシュ │   （120pt）
└─────────────────────────┘
```

### 詳細仕様

#### ヘッダー部分
- **高さ**: 80pt（ステータスバー含む）
- **背景**: 半透明（カメラプレビューが透ける）
- **要素**:
  - 左上: ⚙️ 設定ボタン（44pt × 44pt）
  - 中央: アプリタイトル「🍽️ Dining Memory」
  - 右上: 📋 記録ボタン（バッジ付きで今日の記録数表示）

#### カメラプレビュー領域
- **表示**: フルスクリーンプレビュー
- **機能**:
  - リアルタイム物体認識（料理検出時にほんのり枠表示）
  - タップフォーカス・露出調整
  - ピンチズーム対応
  - ダブルタップでフロント/リアカメラ切替

#### ボトムコントロール
- **高さ**: 120pt
- **レイアウト**:
  - 左: 📷 ギャラリーボタン（最新写真のサムネイル表示）
  - 中央: 🔘 撮影ボタン（80pt、メインアクション）
  - 右: ⚡ フラッシュボタン（ON/OFF/Auto切り替え）

### インタラクション設計
- **撮影**: ワンタップで即撮影（シャッター音、ハプティックフィードバック）
- **連続撮影**: 長押しで連続撮影モード
- **モード切替**: 左右スワイプで撮影モード切替（食事/飲み物）
- **片手操作**: 親指で届く範囲にメインボタン配置

---

## 2. AI解析関連画面設計

### 2-1. 解析中画面（Loading State）

#### レイアウト
```
┌─────────────────────────┐
│                         │
│      撮影した写真        │
│      (プレビュー)        │
│                         │
│    🤖 AI解析中...        │
│   ████████████████     │
│     推定残り 2秒         │
│                         │
│   [キャンセル] [再撮影]   │
└─────────────────────────┘
```

#### 進捗表示パターン
```
🤖 料理を分析しています...     (0-30%)
🍽️ 材料を特定しています...    (30-60%)
📝 情報をまとめています...     (60-90%)
✅ 解析完了！               (100%)
```

#### 技術仕様
- **処理時間**: TensorFlow Liteで3-5秒想定
- **キャンセル**: 処理中断してカメラ画面に戻る
- **タイムアウト**: 10秒超過でエラー処理へ

### 2-2. 解析結果表示画面

#### 成功時レイアウト
```
┌─────────────────────────┐
│  ✅ ラーメン（醤油）        │ ← メイン認識結果
├─────────────────────────┤
│      📸 撮影画像          │
│      (サムネイル)          │
├─────────────────────────┤
│ 🍜 メイン: ラーメン        │
│ 🥚 トッピング: 煮卵、ネギ  │
│ 🍺 ドリンク: ビール？      │ ← 不確実は？付き
├─────────────────────────┤
│ 📍 自宅                  │ ← 自動取得位置
│ ⏰ 2025/9/11 19:30       │ ← 撮影時刻
├─────────────────────────┤
│   [編集] [保存] [再撮影]   │
└─────────────────────────┘
```

#### 表示項目
- **メイン料理名**: 最高確信度の結果
- **材料・トッピング**: 認識できた要素一覧
- **推定ジャンル**: 和食、中華、洋食等
- **ドリンク**: 併せて写った飲み物
- **確信度表示**: 不確実な項目に？マーク
- **メタデータ**: GPS位置、撮影時刻（自動取得）

### 2-3. 編集画面

#### レイアウト
```
┌─────────────────────────┐
│ 📝 記録を編集             │
├─────────────────────────┤
│ 料理名: [ラーメン(醤油)] ✏️  │
│ ジャンル: [和食 ▼]         │
│ 材料: [煮卵,ネギ,海苔] ✏️   │
├─────────────────────────┤
│ メモ: [                 ] │
│      [美味しかった！]     │
├─────────────────────────┤
│ 場所: 📍 [自宅] ✏️        │
│ 日時: 📅 [9/11 19:30] ✏️  │
├─────────────────────────┤
│     [保存] [キャンセル]    │
└─────────────────────────┘
```

#### 編集可能項目
- **料理名**: フリーテキスト入力
- **ジャンル**: プルダウン選択（和食、中華、洋食、その他）
- **材料**: タグ形式で編集
- **メモ**: 自由記述テキスト
- **場所**: GPS結果の手動修正、よく行く店のプリセット
- **日時**: 撮影時刻の手動調整

### 2-4. エラー・失敗時画面

#### AI解析失敗時
```
┌─────────────────────────┐
│      😅 解析困難          │
├─────────────────────────┤
│      📸 撮影画像          │
├─────────────────────────┤
│  料理の特定ができませんでした │
│                         │
│ 手動で入力してください：     │
│ 料理名: [            ] │
│                         │
│  [手動入力] [再撮影]     │
└─────────────────────────┘
```

#### クラウドAI使用確認
```
┌─────────────────────────┐
│    🤖 より詳しく解析？     │
├─────────────────────────┤
│ ローカルAIでは認識困難です  │
│                         │
│ クラウドAIで再解析しますか？ │
│ (月の無料枠: 残り47回)    │
│                         │
│   [はい] [手動入力] [後で] │
└─────────────────────────┘
```

### 2-5. 保存完了画面

#### 成功フィードバック
```
┌─────────────────────────┐
│      ✅ 保存完了！         │
├─────────────────────────┤
│    ラーメン（醤油）        │
│     記録しました          │
├─────────────────────────┤
│  📊 今日の記録: 4件目     │
│  🍜 今月のラーメン: 8回   │
├─────────────────────────┤
│ [続けて撮影] [記録を見る]  │
└─────────────────────────┘
```

---

## 3. RecordsScreen（記録一覧画面）設計

### 基本レイアウト構成
```
┌─────────────────────────┐
│ 📋 食事記録    [検索] [統計] │ ← ヘッダー（60pt）
├─────────────────────────┤
│ [全て▼] [今日] [今週] [今月] │ ← フィルタータブ（44pt）
├─────────────────────────┤
│ 📅 2025年9月11日（水）     │ ← 日付セクション
│  ┌─────────────────────┐ │
│  │ 🍜 19:30  ラーメン   │ │ ← 食事カード
│  │    (醤油)           │ │
│  │ 📍 ○○ラーメン店      │ │
│  │ 💬 美味しかった！    │ │
│  └─────────────────────┘ │
│                         │
│  ┌─────────────────────┐ │
│  │ ☕ 15:00  コーヒー   │ │
│  │ 📍 自宅              │ │
│  └─────────────────────┘ │
└─────────────────────────┘
```

### 詳細コンポーネント設計

#### ヘッダー部分
```
┌─────────────────────────┐
│ 📋 食事記録 (今月45件)  🔍 📊 │
└─────────────────────────┘
```

**要素:**
- **左側**: タイトル + 記録件数（期間に応じて動的表示）
- **右側**: 🔍検索ボタン、📊統計ボタン（SearchScreen/StatsScreenへ）

#### 食事記録カード（サムネイル付き）
```
┌─────────────────────────┐
│ ┌───┐ 19:30 ラーメン（醤油）│
│ │📸 │ 📍 ○○ラーメン店     │
│ │   │ 🏷️ 和食 ラーメン    │
│ └───┘ 💬 美味しかった！   │
└─────────────────────────┘
```

**カード要素:**
- **左側**: 60×60pt の食事写真サムネイル
- **右側**: 食事情報（時刻、名前、場所、タグ、メモ）
- **タップ**: 詳細画面へ遷移
- **長押し**: コンテキストメニュー表示

#### 詳細表示画面
```
┌─────────────────────────┐
│        詳細表示          │
├─────────────────────────┤
│      📸 大きな写真       │
├─────────────────────────┤
│ ラーメン（醤油）          │
│ 🍜 和食 > ラーメン       │
├─────────────────────────┤
│ 🕐 19:30 (2025/9/11)    │
│ 📍 ○○ラーメン店          │
├─────────────────────────┤
│ 材料: 煮卵、ネギ、チャーシュー│
├─────────────────────────┤
│ メモ:                   │
│ 美味しかった！また来たい。 │
├─────────────────────────┤
│  [編集]  [削除]  [共有]  │
└─────────────────────────┘
```

### 表示モード
- **リスト表示**（デフォルト）: 日付別グループ化、サムネイル付きカード
- **カレンダー表示**: 月間カレンダーに記録日を●で表示
- **写真グリッド表示**: 4×4グリッドで写真のみ表示

### インタラクション
- **スワイプ操作**: 左スワイプで[編集][削除]、右スワイプで[詳細][共有]
- **プルリフレッシュ**: 画面上部を下に引っ張りでデータ更新
- **無限スクロール**: 下部到達で次ページ自動読み込み

---

## 4. SearchScreen（検索画面）設計

### 基本レイアウト構成
```
┌─────────────────────────┐
│ 🔍 [検索キーワード入力...] ❌│ ← 検索バー（44pt）
├─────────────────────────┤
│ [すべて] [料理] [場所] [メモ]│ ← 検索範囲タブ（40pt）
├─────────────────────────┤
│ 📅 [期間] 📍 [場所] 🏷️ [タグ]│ ← フィルターボタン（44pt）
├─────────────────────────┤
│ 検索結果: 12件            │ ← 結果ヘッダー
├─────────────────────────┤
│  ┌─────────────────────┐ │
│  │ 🍜 ラーメン（醤油）   │ │ ← 検索結果カード
│  │ 2025/9/11 19:30     │ │   （RecordsScreenと同形式）
│  │ 📍 ○○ラーメン店     │ │
│  │ 💬 美味しかった！    │ │
│  └─────────────────────┘ │
└─────────────────────────┘
```

### 検索機能詳細

#### 基本検索バー
```
┌─────────────────────────┐
│ 🔍 [ラーメン        ] ❌│
└─────────────────────────┘
```

**機能:**
- **リアルタイム検索**: 入力と同時に結果更新
- **クリアボタン**: ❌で検索クリア
- **検索履歴**: 下向き矢印で過去の検索表示

#### 検索候補表示
```
┌─────────────────────────┐
│ 🔍 [ラ              ] ❌ │
├─────────────────────────┤
│ 💭 検索候補              │
│  🍜 ラーメン (28件)      │
│  🥗 ランチ (15件)        │
│  🍛 ライス (8件)         │
├─────────────────────────┤
│ 🕐 最近の検索            │
│  ラーメン                │
│  渋谷 ランチ              │
└─────────────────────────┘
```

### フィルター機能

#### 期間フィルター
```
┌─────────────────────────┐
│      📅 期間フィルター    │
├─────────────────────────┤
│ ◉ すべて                │
│ ○ 今日                  │
│ ○ 今週                  │
│ ○ 今月                  │
│ ○ 先月                  │
│ ○ 過去3ヶ月             │
├─────────────────────────┤
│ ○ カスタム期間           │
│   開始: [2025/9/1  ]    │
│   終了: [2025/9/11 ]    │
├─────────────────────────┤
│     [適用] [リセット]     │
└─────────────────────────┘
```

#### 場所フィルター
```
┌─────────────────────────┐
│      📍 場所フィルター    │
├─────────────────────────┤
│ 🔍 [場所を検索...]       │
├─────────────────────────┤
│ よく行く場所              │
│ ☑️ 自宅 (45件)          │
│ ☑️ ○○ラーメン店 (8件)   │
│ ☐ 会社近く (12件)       │
│ ☐ 渋谷 (6件)            │
└─────────────────────────┘
```

### 検索結果表示

#### ハイライト表示
```
┌─────────────────────────┐
│ 🍜 **ラーメン**（醤油）   │ ← 検索語をハイライト
│ 2025/9/11 19:30         │
│ 📍 ○○**ラーメン**店      │ ← 複数箇所でヒット
│ 💬 美味しかった！        │
│ 🔍 材料: 煮卵, ネギ      │ ← マッチした詳細情報
└─────────────────────────┘
```

---

## 5. StatsScreen（統計画面）設計

### 基本レイアウト構成
```
┌─────────────────────────┐
│ 📊 統計    [今月▼] [共有] │ ← ヘッダー（60pt）
├─────────────────────────┤
│ 📈 今月のサマリー          │ ← サマリーカード
│  ┌─────────────────────┐ │
│  │ 記録: 45件  前月: +8件 │ │
│  │ 外食: 28件  自宅: 17件 │ │
│  │ よく行く店: ○○ラーメン  │ │
│  └─────────────────────┘ │
├─────────────────────────┤
│ 🏠 自炊の傾向分析          │ ← 自炊分析セクション
│  ┌─────────────────────┐ │
│  │ ⚡ 時短料理  ████████ 8件│ │
│  │ 🍳 日常料理  ████████████ 12件│ │
│  │ 👨‍🍳 本格料理 ████ 4件    │ │
│  └─────────────────────┘ │
└─────────────────────────┘
```

### インサイト・発見機能

#### 自炊パターン分析
```
┌─────────────────────────┐
│     🏠 自炊の傾向分析     │
├─────────────────────────┤
│ 📊 自炊レベル分類:        │
│ ⚡ 時短料理  ████████ 8件│
│   (冷凍食品、レトルト等)   │
│ 🍳 日常料理  ████████████ 12件│
│   (炒め物、煮物等)        │
│ 👨‍🍳 本格料理 ████ 4件    │
│   (手作りパスタ、煮込み等) │
├─────────────────────────┤
│ 🌟 特別な自炊発見:        │
│ 9/15「手作り餃子」        │
│ → 3ヶ月ぶりの本格自炊！   │
└─────────────────────────┘
```

#### 自炊メニュー発見
```
┌─────────────────────────┐
│   🔍 あなたの自炊レパートリー│
├─────────────────────────┤
│ よく作る料理 TOP5:        │
│ 1. パスタ (6回)          │
│ 2. 炒飯 (4回)            │
│ 3. カレー (3回)          │
│ 4. 焼肉 (3回)            │
│ 5. 味噌汁 (2回)          │
├─────────────────────────┤
│ 💡 最近の傾向:           │
│ パスタブーム継続中！      │
│ 過去3週間で4回も作成     │
│                         │
│ 🤔 そういえば:           │
│ 以前よく作った「親子丼」   │
│ 最後に作ったのは2ヶ月前   │
│ また作ってみる？          │
├─────────────────────────┤
│ 📅 忘れかけてるメニュー:  │
│ • オムライス (4ヶ月前)   │
│ • 肉じゃが (5ヶ月前)     │
│ • ハンバーグ (3ヶ月前)   │
└─────────────────────────┘
```

#### 隠れたルーティン発見
```
┌─────────────────────────┐
│   🕵️ 隠れたルーティン    │
├─────────────────────────┤
│ 💡 発見されたパターン:    │
│                         │
│ 🗓️「火曜日は中華の日」   │
│   過去8週中6回が中華料理  │
│                         │
│ ☕「午後3時のカフェタイム」│
│   平日の15-16時に高確率  │
│                         │
│ 🍺「金曜の一杯は必須」    │
│   金曜記録の90%にアルコール│
│                         │
│ 🏠「日曜は自炊モード」    │
│   日曜の自炊率75%        │
└─────────────────────────┘
```

#### 季節・環境との関連
```
┌─────────────────────────┐
│   🌤️ あなた×環境の発見  │
├─────────────────────────┤
│ 天気との関係:             │
│ ☀️ 晴れ → サッパリ系 +30%│
│ 🌧️ 雨 → 温かい物 +50%   │
│ 🌬️ 寒い日 → 鍋率 80%UP  │
│                         │
│ 曜日との関係:             │
│ 月曜: リセット（和食多）   │
│ 水曜: 中だるみ（外食多）   │
│ 金曜: 解放感（お酒率高）   │
│                         │
│ 💭「無意識の選択パターン」 │
└─────────────────────────┘
```

### 控えめな成長記録

#### シンプルな振り返り
```
┌─────────────────────────┐
│   📝 今月の振り返り       │
├─────────────────────────┤
│ 記録した日数: 30/30日     │
│ 最も多かった料理: ラーメン │
│ 最も多かった場所: 自宅    │
│ 初めて記録した料理: つけ麺 │
├─────────────────────────┤
│ 🤔 ちょっとした発見:      │
│ 「最近、自炊が増えてる？」 │
│ 6月: 8回 → 9月: 17回     │
└─────────────────────────┘
```

---

## 6. SettingsScreen（設定画面）設計

### 基本レイアウト構成
```
┌─────────────────────────┐
│ ⚙️ 設定                  │ ← ヘッダー（60pt）
├─────────────────────────┤
│ 📊 データ管理             │ ← セクションヘッダー
│  ┌─────────────────────┐ │
│  │ 💾 バックアップ       │ │ ← 設定項目
│  │ 📤 データエクスポート  │ │
│  │ 🗑️ データ削除        │ │
│  └─────────────────────┘ │
├─────────────────────────┤
│ 📱 アプリ設定             │
│  ┌─────────────────────┐ │
│  │ 🔔 通知設定          │ │
│  │ 📸 カメラ設定        │ │
│  │ 🎨 表示設定          │ │
│  └─────────────────────┘ │
├─────────────────────────┤
│ 🔒 プライバシー           │
│  ┌─────────────────────┐ │
│  │ 📍 位置情報          │ │
│  │ 📊 使用状況データ     │ │
│  └─────────────────────┘ │
└─────────────────────────┘
```

### 主要設定項目

#### バックアップ設定
```
┌─────────────────────────┐
│      💾 バックアップ      │
├─────────────────────────┤
│ 自動バックアップ: ON      │
│ 📱 iCloud Drive         │
│                         │
│ 最終バックアップ:         │
│ 2025/9/11 22:30         │
│                         │
│ データサイズ: 12.3MB     │
│ (写真: 8.1MB, DB: 4.2MB) │
├─────────────────────────┤
│  [今すぐバックアップ]     │
│  [復元する]              │
└─────────────────────────┘
```

#### カメラ設定
```
┌─────────────────────────┐
│     📸 カメラ設定        │
├─────────────────────────┤
│ 写真品質:                │
│ ◉ 高画質 (推奨)         │
│ ○ 標準                 │
│ ○ 低画質 (容量節約)     │
│                         │
│ 保存形式: JPEG          │
│ 圧縮レベル: 80%         │
│                         │
│ GPS情報: ON             │
│ 写真に位置情報を埋め込み  │
└─────────────────────────┘
```

#### プライバシー設定
```
┌─────────────────────────┐
│     📍 位置情報設定      │
├─────────────────────────┤
│ 位置情報の使用: ON       │
│ 撮影時に自動取得         │
│                         │
│ 精度レベル:              │
│ ◉ 高精度 (GPS)         │
│ ○ 低精度 (ネットワーク)  │
│                         │
│ 💡 すべて端末内保存      │
│   外部送信はありません    │
└─────────────────────────┘
```

---

## 40代男性ターゲット向けUX設計方針

### 視認性・操作性重視
- **大きなボタン**: 最小44pt以上のタップターゲット
- **高コントラスト**: 暗い背景に明るいボタン
- **アイコン+テキスト**: 直感的理解のためのラベル併記
- **適切なフォントサイズ**: 16pt以上の読みやすいサイズ

### 実用性・効率性重視
- **ワンタップ操作**: 撮影から保存まで最小ステップ
- **自動化**: AI解析、GPS取得、時刻記録の自動処理
- **検索効率**: リアルタイム検索、履歴活用
- **統計の実用性**: 行動パターンの発見、振り返り支援

### 信頼性・透明性
- **AI結果の信頼性表示**: 確信度を正直に表示
- **手動修正の歓迎**: AIを盲信せず、ユーザー判断を尊重
- **データ保護**: 写真は即座に保存、損失リスクなし
- **段階的フォールバック**: ローカル→クラウド→手動の選択肢

### シンプル・控えめ
- **余計なお世話をしない**: 過度な提案や指導を避ける
- **自然な気づき**: 「そういえば」レベルの発見提供
- **押し付けがましくない**: 達成感は控えめに表現

---

## 技術実装との連携

### React Native コンポーネント構成
```
src/
├── screens/
│   ├── CameraScreen/
│   │   ├── CameraView.tsx          // メインカメラ表示
│   │   ├── CameraControls.tsx      // 撮影コントロール
│   │   ├── AnalysisOverlay.tsx     // AI解析結果オーバーレイ
│   │   └── components/
│   │       ├── ShutterButton.tsx   // 撮影ボタン
│   │       ├── FlashButton.tsx     // フラッシュ制御
│   │       └── GalleryButton.tsx   // ギャラリーアクセス
│   ├── RecordsScreen/
│   │   ├── RecordsList.tsx         // 記録一覧表示
│   │   ├── RecordCard.tsx         // 食事記録カード
│   │   ├── RecordDetail.tsx       // 詳細表示
│   │   └── FilterTabs.tsx         // フィルタータブ
│   ├── SearchScreen/
│   │   ├── SearchBar.tsx          // 検索バー
│   │   ├── FilterPanel.tsx        // フィルターパネル
│   │   ├── SearchResults.tsx      // 検索結果表示
│   │   └── SearchSuggestions.tsx  // 検索候補
│   ├── StatsScreen/
│   │   ├── StatsSummary.tsx       // サマリーカード
│   │   ├── InsightsPanel.tsx      // インサイト表示
│   │   ├── CookingAnalysis.tsx    // 自炊分析
│   │   └── RoutineDiscovery.tsx   // ルーティン発見
│   └── SettingsScreen/
│       ├── SettingsList.tsx       // 設定項目一覧
│       ├── BackupSettings.tsx     // バックアップ設定
│       ├── CameraSettings.tsx     // カメラ設定
│       └── PrivacySettings.tsx    // プライバシー設定
└── components/
    └── shared/
        ├── TabNavigation.tsx      // ボトムタブ
        ├── LoadingOverlay.tsx     // ローディング表示
        └── ConfirmDialog.tsx      // 確認ダイアログ
```

### 状態管理設計
```typescript
// メインのアプリ状態
interface AppState {
  // カメラ関連
  camera: {
    mode: 'camera' | 'analyzing' | 'result' | 'editing';
    photo: ImageData | null;
    analysisResult: AnalysisResult | null;
    isLoading: boolean;
    error: string | null;
  };
  
  // 記録関連
  records: {
    meals: Meal[];
    currentFilter: FilterOptions;
    isLoading: boolean;
  };
  
  // 検索関連
  search: {
    query: string;
    results: Meal[];
    filters: SearchFilters;
    suggestions: string[];
  };
  
  // 統計関連
  stats: {
    period: StatsPeriod;
    summary: StatsSummary;
    insights: InsightData[];
    cookingAnalysis: CookingStats;
  };
  
  // 設定関連
  settings: {
    camera: CameraSettings;
    notifications: NotificationSettings;
    privacy: PrivacySettings;
    display: DisplaySettings;
  };
}
```

### データベース連携
データベース設計（database-design.md）との完全連携:

```typescript
// 主要なデータ型
interface Meal {
  id: number;
  uuid: string;
  meal_name: string;
  meal_type: string;
  cuisine_type: string;
  ai_confidence: number;
  notes: string;
  photo_path: string;
  location_name: string;
  latitude: number;
  longitude: number;
  meal_datetime: Date;
  search_text: string;
  tags: string;
  ingredients: Ingredient[];
  images: MealImage[];
}

interface Ingredient {
  id: number;
  meal_id: number;
  name: string;
  category: string;
  confidence: number;
}
```

---

## 空状態・エラー状態設計

### 初回利用時（空状態）
```
┌─────────────────────────┐
│                         │
│     🍽️                 │
│                         │
│   まだ記録がありません    │
│                         │
│  最初の食事を記録しましょう │
│                         │
│    [📸 写真を撮る]       │
│                         │
└─────────────────────────┘
```

### 検索結果0件
```
┌─────────────────────────┐
│     🔍                  │
│                         │
│  「寿司」の検索結果が      │
│    見つかりません         │
│                         │
│ 検索条件を変更してください   │
│                         │
│   [条件をリセット]        │
└─────────────────────────┘
```

### ネットワークエラー
```
┌─────────────────────────┐
│     📡                  │
│                         │
│   接続エラー             │
│                         │
│ クラウドAI解析に失敗しました│
│ ローカル解析結果を使用します │
│                         │
│     [再試行] [続行]      │
└─────────────────────────┘
```

---

## アクセシビリティ対応

### VoiceOver/TalkBack対応例
```typescript
// カメラ画面
<ShutterButton
  accessible={true}
  accessibilityLabel="写真を撮影"
  accessibilityHint="タップして食事の写真を撮影します"
  accessibilityRole="button"
/>

// 記録カード
<MealCard
  accessible={true}
  accessibilityLabel="ラーメン、醤油、○○ラーメン店、午後7時30分、メモ: 美味しかった"
  accessibilityHint="タップして詳細を表示"
/>

// 統計画面
<StatsCard
  accessible={true}
  accessibilityLabel="今月の記録45件、前月より8件増加、よく作る料理はパスタ"
  accessibilityHint="タップして詳細を表示"
/>
```

### キーボードナビゲーション
- Tab キーでの要素間移動
- Enter キーでのアクション実行
- Escape キーでのモーダル閉じる
- 矢印キーでのリスト項目選択

### 大文字表示対応
- Dynamic Type対応（iOS）
- システムフォントスケール対応（Android）
- 文字サイズに応じたレイアウト調整
- 最小44pt タップターゲット維持

---

## パフォーマンス考慮

### 大量データ対応
- **仮想スクロール**: FlatList/VirtualizedListでメモリ効率化
- **遅延読み込み**: 画像のLazy Loading
- **ページネーション**: 100件ずつ読み込み
- **インデックス活用**: データベース設計に基づく高速クエリ

### 画像最適化
- **WebP形式**: 高圧縮率での保存
- **サムネイル生成**: リスト表示用の小さな画像
- **段階的読み込み**: プレビュー→高解像度の順次読み込み
- **キャッシュ戦略**: よく見る画像の先読み

### AI処理最適化
- **TensorFlow Lite**: 端末内高速推論
- **GPU加速**: 可能な場合はGPU活用
- **モデル量子化**: 軽量化されたAIモデル使用
- **段階的フォールバック**: ローカル失敗時のクラウドAI使用

---

## 実装優先順位

### Phase 1: 基本機能（MVP）
1. **CameraScreen**: 撮影・基本AI解析・保存
2. **RecordsScreen**: 一覧表示・詳細表示
3. **基本データベース**: meals, ingredientsテーブル
4. **TabNavigation**: 画面間遷移

### Phase 2: 検索・フィルター
1. **SearchScreen**: テキスト検索・期間フィルター
2. **FTS検索**: SQLite全文検索実装
3. **場所・タグフィルター**: 複合条件検索

### Phase 3: 統計・インサイト
1. **StatsScreen**: 基本統計・サマリー
2. **自炊分析**: レベル分類・レパートリー発見
3. **行動パターン発見**: ルーティン・隠れたパターン

### Phase 4: 設定・最適化
1. **SettingsScreen**: 設定項目・バックアップ
2. **パフォーマンス最適化**: 大量データ対応
3. **アクセシビリティ**: 完全対応

---

## 他ドキュメントとの整合性確認

### ✅ tech-spec.mdとの整合性
- **技術スタック**: React Native + Expo ✓
- **データベース**: SQLite + Watermelon DB ✓
- **AI処理**: TensorFlow Lite メイン、Gemini API補完 ✓
- **ストレージ**: 端末内保存、iCloud/Google Drive バックアップ ✓

### ✅ database-design.mdとの整合性
- **mealsテーブル**: 満足度削除、メモフィールド活用 ✓
- **ingredientsテーブル**: 材料・トッピング表示 ✓
- **locationsテーブル**: よく行く場所機能 ✓
- **search_vectorsテーブル**: 将来のセマンティック検索準備 ✓
- **FTS5**: 全文検索機能 ✓

### ✅ user-flows.mdとの整合性
- **メインフロー**: 撮影→解析→編集→保存 ✓
- **検索フロー**: 検索→フィルター→結果表示 ✓
- **統計フロー**: 期間選択→分析→インサイト表示 ✓
- **40代男性UX**: シンプル・効率・実用重視 ✓

---

## 今後の課題・拡張予定

### 技術的課題
1. **AI精度向上**: より多くの日本料理対応
2. **オフライン同期**: 複数端末間のデータ同期
3. **セマンティック検索**: 自然言語検索の実装
4. **パフォーマンス**: 数千件データでの動作最適化

### UX改善
1. **オンボーディング**: 初回利用時のチュートリアル
2. **カスタマイズ**: ユーザー好みに応じた表示調整
3. **ショートカット**: よく使う操作の効率化
4. **音声メモ**: 文字入力の代替手段

### 機能拡張
1. **栄養情報**: カロリー・栄養素の自動推定
2. **レシピ連携**: 自炊レシピの管理・共有
3. **家計簿機能**: 食費の記録・分析
4. **健康連携**: ヘルスケアアプリとの連動

---

*このドキュメントは実装進捗に合わせて随時更新・最適化する*